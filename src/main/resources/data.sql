DROP TABLE IF EXISTS users;
CREATE TABLE users
(
    user_id           BIGINT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    first_name        VARCHAR(128),
    last_name         VARCHAR(128),
    user_name         VARCHAR(128),
    password          VARCHAR(255),
    is_active         BOOLEAN,
    criteria          VARCHAR(255),
    date_of_birth     DATE,
    address           VARCHAR(255),
    trainers          VARCHAR(120),
    is_assigned       BOOLEAN,
    trainings         VARCHAR(255),
    specialization_id BIGINT,
    DTYPE             VARCHAR(255)
);

-- DROP TABLE IF EXISTS specialization;
-- CREATE TABLE specialization
-- (
--     specialization_id BIGINT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
--     speciality        VARCHAR(255)
-- );

DROP TABLE IF EXISTS trainer;
CREATE TABLE trainer
(
    trainer_id        BIGINT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    specialization_id BIGINT,
    user_id           BIGINT,
    trainee_id        BIGINT,
    training_id       BIGINT
);

DROP TABLE IF EXISTS trainee;
CREATE TABLE trainee
(
    trainee_id    BIGINT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    date_of_birth DATE,
    address       VARCHAR(255),
    user_id       BIGINT,
    trainers      VARCHAR(120),
    is_assigned   BOOLEAN,
    trainings     VARCHAR(255)
);

DROP TABLE IF EXISTS trainer_trainee;
CREATE TABLE trainer_trainee
(
    trainee_id BIGINT,
    trainer_id BIGINT,
    PRIMARY KEY (trainee_id, trainer_id),
    FOREIGN KEY (trainer_id) REFERENCES trainer (trainer_id) ON DELETE CASCADE ON UPDATE CASCADE,
    FOREIGN KEY (trainee_id) REFERENCES trainee (trainee_id) ON DELETE CASCADE ON UPDATE CASCADE

);

DROP TABLE IF EXISTS training;
CREATE TABLE training
(
    training_id       BIGINT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    trainee_id        BIGINT,
    trainer_id        BIGINT,
    training_name     VARCHAR(255),
    training_type_id  BIGINT,
    training_date     DATE,
    training_duration bytea
);

DROP TABLE IF EXISTS trainee_training;
CREATE TABLE trainee_training
(
    trainee_id  BIGINT,
    training_id BIGINT,
    PRIMARY KEY (trainee_id, training_id),
    FOREIGN KEY (trainee_id) REFERENCES trainee (trainee_id) ON DELETE CASCADE ON UPDATE CASCADE,
    FOREIGN KEY (training_id) REFERENCES training (training_id) ON DELETE CASCADE ON UPDATE CASCADE
);
DROP TABLE IF EXISTS trainer_training;
CREATE TABLE trainer_training
(
    trainer_id  INTEGER,
    training_id INTEGER,
    PRIMARY KEY (trainer_id, training_id),
    FOREIGN KEY (trainer_id) REFERENCES trainer (trainer_id) ON DELETE CASCADE ON UPDATE CASCADE,
    FOREIGN KEY (training_id) REFERENCES training (training_id) ON DELETE CASCADE ON UPDATE CASCADE
);

DROP TABLE IF EXISTS training_type;
CREATE TABLE training_type
(
    training_type_id   INTEGER PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    training_type_name VARCHAR(120)
);

